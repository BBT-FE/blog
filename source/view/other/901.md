---
title: 性能优化问题
date: 
tag:
 - 出云

---
主要有两个方面：
  减少页面加载的时间
  提升用户角度的感官体验
  减少页面加载所需要的时间，可以从请求数量、请求并发及网络传输的角度出发；提升用户感官体验，则主要是让页面尽快展示。

  1.减少HTTP请求，把一些资源合并
  2.合理使用浏览器缓存
  3.使用压缩，尽可能的将外部的脚本、样式进行合并，多个合为一个,之前看的jquery.mini和普通版就是很好的例子
  4.CDN加速，本质仍然是一个缓存，而且将数据缓存在离用户最近的地方，使用户以最快速度获取数据，即所谓网络访问第一跳
  5.CSS放在页面最上部，js放在页面最下面，js阻塞 HTML 和 CSS 元素的加载过程
  6.采用合适的CSS来替换图片图标，减少图片请求

1. 减少网络时间
  所有的服务端资源都经过 DNS 解析 至 建立连接 至断开连接的过程，因此可以从以下几个方面入手

  使用 DNS 缓存技术
    一般浏览器本身具有一定的 DNS 缓存机制，所以服务端的 DNS 缓存不能引起太大的提升

  减少传输文件的尺寸
    将文件进行压缩
    利用混淆的方式减少 JS 文件和样式表的大小
    从 JS 文件中去掉不需要的部分

  加快文件传输速度
    使用 CDN 技术

2. 减少请求的数量

  利用浏览器缓存
    为充分利用浏览器缓存，需要在服务器端保证每个可以被缓存的资源在服务端返回时附带合适的 expires 头信息尽量把页面中很少改变的部分提取出来
  使用引用的方式加载 JS 和样式表
    使用 URI

  使用合并的图片文件
    当页面包含很多小图片文件时，可以考虑将小图片合并成一个大图片，在页面中使用 CSS Sprites 技术将大图片显示分割成小图片，这种方式可以大量减少 http 请求数量

3. 提高浏览器下载的并发度

  JS 文件放在 HTML 文件最后加载
  使用多个域名

4. 让页面尽早显示

  将样式表放在 HTML 文件头部加载
  JS 引用放在最后加载

代码层面：避免使用css表达式，避免使用高级选择器，通配选择器。

缓存利用：缓存Ajax，使用CDN，使用外部js和css文件以便缓存，添加Expires头，服务端配置Etag，减少DNS查找等

请求数量：合并样式和脚本，使用css图片精灵，初始首屏之外的图片资源按需加载，静态资源延迟加载。

请求带宽：压缩文件，开启GZIP，

代码层面的优化

用hash-table来优化查找

少用全局变量

用innerHTML代替DOM操作，减少DOM操作次数，优化javascript性能

用setTimeout来避免页面失去响应

缓存DOM节点查找的结果

避免使用CSS Expression

避免全局查询

避免使用with(with会创建自己的作用域，会增加作用域链长度)

多个变量声明合并

避免图片和iFrame等的空Src。空Src会重新加载当前页面，影响速度和效率

尽量避免写在HTML标签中写Style属性

移动端性能优化

尽量使用css3动画，开启硬件加速。

适当使用touch事件代替click事件。

避免使用css3渐变阴影效果。

可以用transform: translateZ(0)来开启硬件加速。

不滥用Float。Float在渲染时计算量比较大，尽量减少使用

不滥用Web字体。Web字体需要下载，解析，重绘当前页面，尽量减少使用。

合理使用requestAnimationFrame动画代替setTimeout

CSS中的属性（CSS3 transitions、CSS3 3D transforms、Opacity、Canvas、WebGL、Video）会触发GPU渲染，请合理使用。过渡使用会引发手机过耗电增加

PC端的在移动端同样适用